<!DOCTYPE html>
<html>
    <head>
        <title>Prezzi Pazzi</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://fb.me/react-with-addons-0.14.0.js"></script>
        <script src="https://fb.me/react-dom-0.14.0.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js"></script>   
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.31.5/react-bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap-theme.min.css">
    </head>
    <body>
        <div id="hello" style="margin-top:50px;"></div>
        <form name="purchaseProduct" action="Login" method="POST">
                    <input id="valueToPassEmail" type="hidden" name="email" value="" />
                    <input id="valueToPassPassword" type="hidden" name="password" value="" />
        </form>
        <script type="text/babel">
            
            
            
            
            var cUs = getCookie("usernamePrezziPazzi")
            var cPsw = getCookie("passwordPrezziPazzi")
             console.log("Ceck cookie");
            if(cUs !== "" && cPsw !== ""){
                //autlogin
                
               
                /*var url = "Login";
                var http = new XMLHttpRequest();                        
                var params = "email="+cUs+"&password="+cPsw;
                http.open("POST", url, true);

                //Send the proper header information along with the request
                http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                        
                http.onreadystatechange = function() {//Call a function when the state changes.
                    if(http.readyState == 4 && http.status == 200) {
                        //alert(http.responseText);
                        window.location = "home.jsp";
                    }
                }
                http.send(params);*/
                //AUTOLOGIN
                document.getElementById("valueToPassEmail").value = cUs;
                document.getElementById("valueToPassPassword").value = cPsw;
                document.forms[0].submit();
                
            }
            else{
            var Form = ReactBootstrap.Form;
            var FormGroup = ReactBootstrap.FormGroup;
            var Col = ReactBootstrap.Col;
            var ControlLabel = ReactBootstrap.ControlLabel;
            var FormControl  = ReactBootstrap.FormControl; 
            var Checkbox  = ReactBootstrap.Checkbox;
            var Button = ReactBootstrap.Button; 
            var Image = ReactBootstrap.Image;
const formInstance = (
        
  <Form horizontal method="post" action="Login">
            <Image src="http://www.opinioni.it/Uploads/Products/399/prezzipazzi.com_large.jpg" responsive />
    <FormGroup controlId="formHorizontalEmail">
      <Col componentClass={ControlLabel} sm={2}>
        Email
      </Col>
      <Col sm={5}>
      <FormControl type="email" placeholder="Email" name="email" />
      </Col>
    </FormGroup>
    <FormGroup controlId="formHorizontalPassword">
    <Col componentClass={ControlLabel} sm={2}>
Password
</Col>
<Col sm={5}>
<FormControl type="password" placeholder="Password" name="password"/>
</Col>
</FormGroup>
<FormGroup>
    <Col smOffset={2} sm={10}>
    <Checkbox name="rememberMe">Remember me</Checkbox>
    </Col>
</FormGroup>

<FormGroup>
    <Col smOffset={2} sm={10}>
    <Button type="submit">
        Sign in
    </Button>
    </Col>
</FormGroup>
</Form>
);

ReactDOM.render(formInstance,document.getElementById("hello"));
            }
            
            
  

    function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}
        </script>
    </body>
</html>
